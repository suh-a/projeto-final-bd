    CREATE DATABASE work_flow_db;

USE work_flow_db;

CREATE TABLE usuarios(
    id_usuarios INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(45)NOT NULL,
    senha VARCHAR(8) NOT NULL,
    telefone VARCHAR(20) NOT NULL,
    cpf VARCHAR(14) NOT NULL,
    data_criacao DATETIME DEFAULT NOW()
);

CREATE TABLE notificacoes(
    id_notificacao INT AUTO_INCREMENT PRIMARY KEY,
    mensagem VARCHAR(45) NOT NULL,
    data_envio DATETIME NOT NULL DEFAULT NOW(),
    lida TINYINT NOT NULL,
    id_usuarios INT,
    FOREIGN KEY(id_usuarios)REFERENCES usuarios(id_usuarios)
);

CREATE TABLE areas(
    id_area INT AUTO_INCREMENT PRIMARY KEY,
    nome_area VARCHAR(45) NOT NULL	
);

CREATE TABLE profissionais(
    id_profissional INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(45)NOT NULL,
    senha VARCHAR(8) NOT NULL,
    telefone VARCHAR(20) NOT NULL,
    cpf_cnpj VARCHAR(45)NOT NULL,
    descricao VARCHAR(200),
    nota_media DOUBLE,
    data_criacao DATETIME NOT NULL,
    id_area INT,
    FOREIGN KEY (id_area)REFERENCES areas(id_area)
);

CREATE TABLE disponibilidade(
    id_disponibilidade INT AUTO_INCREMENT PRIMARY KEY,
    dia_semana VARCHAR(45) NOT NULL,
    horario_inicio TIME NOT NULL,
    horario_fim TIME NOT NULL,
    id_profissional INT,
    FOREIGN KEY(id_profissional)REFERENCES profissionais(id_profissional)
);

CREATE TABLE avaliacoes(
    id_avaliacao INT AUTO_INCREMENT PRIMARY KEY,
    nota DOUBLE NOT NULL,
    comentario VARCHAR(45) NOT NULL,
    data_avaliacao DATETIME DEFAULT NOW(),
    id_usuarios INT,
    id_profissional INT,
    FOREIGN KEY(id_usuarios)REFERENCES usuarios(id_usuarios),
    FOREIGN KEY(id_profissional)REFERENCES profissionais(id_profissional)
);

CREATE TABLE favoritos(
    id_favorito INT AUTO_INCREMENT PRIMARY KEY,
    id_usuarios INT,
    id_profissional INT,
    FOREIGN KEY (id_usuarios)REFERENCES usuarios(id_usuarios),
    FOREIGN KEY (id_profissional)REFERENCES profissionais(id_profissional)
);

CREATE TABLE mensagens_chat(
    id_mensagem INT AUTO_INCREMENT PRIMARY KEY,
    mensagem TEXT NOT NULL,
    data_envio DATETIME DEFAULT NOW(),
    id_usuarios INT,
    id_profissional INT,
    FOREIGN KEY(id_usuarios) REFERENCES usuarios(id_usuarios),
    FOREIGN KEY(id_profissional) REFERENCES profissionais(id_profissional)
);

CREATE TABLE enderecos(
    id_endereco INT AUTO_INCREMENT PRIMARY KEY,
    rua VARCHAR(100) NOT NULL,
    numero VARCHAR(10) NOT NULL,
    complemento VARCHAR(50),
    bairro VARCHAR(50) NOT NULL,
    cidade VARCHAR(50) NOT NULL,
    estado VARCHAR(2) NOT NULL,
    cep VARCHAR(9) NOT NULL,
    id_usuarios INT,
    id_profissional INT,
    FOREIGN KEY(id_usuarios) REFERENCES usuarios(id_usuarios),
    FOREIGN KEY(id_profissional) REFERENCES profissionais(id_profissional)
);

CREATE TABLE categorias_servicos(
    id_categoria INT AUTO_INCREMENT PRIMARY KEY,
    nome_categoria VARCHAR(45) NOT NULL	  
);

CREATE TABLE servicos(
    id_servico INT AUTO_INCREMENT PRIMARY KEY,
    nome_servico VARCHAR(45) NOT NULL,
    descricao TEXT,
    preco_base DOUBLE NOT NULL,
    id_categoria INT,
    FOREIGN KEY(id_categoria) REFERENCES categorias_servicos(id_categoria)
);

CREATE TABLE solicitar_serv(
    id_solicitacao INT AUTO_INCREMENT PRIMARY KEY,
    data_solicitacao DATETIME NOT NULL DEFAULT NOW(),
    data_agendada DATETIME NOT NULL,
    stats ENUM('ACEITA','RECUSADA'),
    observacoes VARCHAR(100),
    id_usuarios INT,
    id_profissional INT,
    id_servico INT,
    FOREIGN KEY(id_usuarios)REFERENCES usuarios(id_usuarios),
    FOREIGN KEY(id_profissional)REFERENCES profissionais(id_profissional),
    FOREIGN KEY(id_servico)REFERENCES servicos(id_servico)
);

CREATE TABLE pagamentos(
    id_pagamento INT AUTO_INCREMENT PRIMARY KEY,
    valor DOUBLE NOT NULL,
    metodo_pagamento VARCHAR(45) NOT NULL,
    status_pagamento ENUM('PA','NP') NOT NULL,
    data_pagamento DATETIME DEFAULT NOW(),
    id_solicitacao INT,
    FOREIGN KEY(id_solicitacao)REFERENCES solicitar_serv(id_solicitacao)
);

CREATE TABLE historico_pag(
    id_historico INT AUTO_INCREMENT PRIMARY KEY,
    id_profissional INT,
    id_pagamento INT,
    FOREIGN KEY(id_profissional)REFERENCES profissionais(id_profissional),
    FOREIGN KEY(id_pagamento)REFERENCES pagamentos(id_pagamento)
);


INSERT INTO usuarios (nome, email, senha, telefone, cpf) VALUES
('João Silva', 'joao.silva@email.com', 'joao1267', '(11) 91234-5678', '123.456.789-00'),
('Maria Oliveira', 'maria.oliveira@email.com', '87654321', '(21) 98765-4321', '234.567.890-01'),
('Pedro Souza', 'pedro.souza@email.com', 'pas12351', '(31) 92345-6789', '345.678.901-02'),
('Ana Costa', 'ana.costa@email.com', 'anac5123', '(41) 93456-7890', '456.789.012-03'),
('Carlos Lima', 'carlos.lima@email.com', 'car126li', '(51) 94567-8901', '567.890.123-04'),
('Patrícia Pereira', 'patricia.pereira@email.com', 'abcde123', '(61) 95678-9012', '678.901.234-05'),
('Roberto Gomes', 'roberto.gomes@email.com', 'rober987', '(71) 96789-0123', '789.012.345-06'),
('Fernanda Silva', 'fernanda.silva@email.com', '123ferna', '(81) 97890-1234', '890.123.456-07'),
('Luciana Martins', 'luciana.martins@email.com', 'luci8na2', '(91) 98901-2345', '901.234.567-08'),
('Rafael Alves', 'rafael.alves@email.com', '65432198', '(11) 91234-9876', '012.345.678-09');


INSERT INTO notificacoes (mensagem, lida, id_usuarios) VALUES
('Mensagem 1', 0, 1),
('Mensagem 2', 1, 2),
('Mensagem 3', 0, 3),
('Mensagem 4', 1, 4),
('Mensagem 5', 0, 5),
('Mensagem 6', 1, 6),
('Mensagem 7', 0, 7),
('Mensagem 8', 1, 8),
('Mensagem 9', 0, 9),
('Mensagem 10', 1, 10);

 INSERT INTO areas (nome_area) VALUES 
('Engenharia Civil'),
('Arquitetura'),
('Topografia'),
('Geotecnia'),
('Hidráulica'),
('Saneamento'),
('Transportes'),
('Estruturas'),
('Construção Civil'),
('Planejamento Urbano');

INSERT INTO profissionais (nome, email, senha, telefone, cpf_cnpj, descricao, nota_media, data_criacao, id_area) VALUES
('João Silva', 'joao@exemplo.com', 'senha123', '11999999999', '123.456.789-00', 'Especialista em fundações e estruturas.', 4.5, NOW(), 1),
('Maria Souza', 'maria@exemplo.com', 'senha123', '11988888888', '987.654.321-00', 'Projetos arquitetônicos residenciais.', 4.7, NOW(), 2),
('Carlos Mendes', 'carlos@exemplo.com', 'senha123', '11977777777', '321.654.987-00', 'Levantamentos topográficos precisos.', 4.6, NOW(), 3),
('Ana Lima', 'ana@exemplo.com', 'senha123', '11966666666', '654.987.321-00', 'Análise e contenção de solos.', 4.4, NOW(), 4),
('Pedro Rocha', 'pedro@exemplo.com', 'senha123', '11955555555', '789.123.456-00', 'Projetos de drenagem urbana.', 4.8, NOW(), 5),
('Fernanda Costa', 'fernanda@exemplo.com', 'senha123', '11944444444', '456.789.123-00', 'Soluções de esgoto e água potável.', 4.9, NOW(), 6),
('Lucas Oliveira', 'lucas@exemplo.com', 'senha123', '11933333333', '963.852.741-00', 'Logística e planejamento viário.', 4.3, NOW(), 7),
('Juliana Dias', 'juliana@exemplo.com', 'senha123', '11922222222', '852.741.963-00', 'Projetos estruturais de edifícios.', 4.6, NOW(), 8),
('Rafael Almeida', 'rafael@exemplo.com', 'senha123', '11911111111', '741.963.852-00', 'Execução de obras civis.', 4.7, NOW(), 9),
('Camila Martins', 'camila@exemplo.com', 'senha123', '11900000000', '159.357.486-00', 'Desenvolvimento urbano sustentável.', 4.8, NOW(), 10);

INSERT INTO disponibilidade (dia_semana, horario_inicio, horario_fim, id_profissional) VALUES
  ('Segunda-feira', '08:00:00', '12:00:00', 1),
  ('Terça-feira', '13:00:00', '17:00:00', 2),
  ('Quarta-feira', '09:00:00', '13:00:00', 3),
  ('Quinta-feira', '14:00:00', '18:00:00', 4),
  ('Sexta-feira', '10:00:00', '14:00:00', 5),
  ('Sábado', '08:00:00', '12:00:00', 6),
  ('Domingo', '13:00:00', '17:00:00', 7),
  ('Segunda-feira', '09:00:00', '13:00:00', 8),
  ('Terça-feira', '14:00:00', '18:00:00', 9),
  ('Quarta-feira', '10:00:00', '14:00:00', 10);

INSERT INTO avaliacoes (nota, comentario, id_usuarios, id_profissional) VALUES
(5.0, 'Excelente trabalho!', 1, 1),
(4.5, 'Muito bom, mas poderia melhorar.', 2, 2),
(3.0, 'Atendimento razoável.', 3, 3),
(4.8, 'Ótima experiência!', 4, 4),
(4.2, 'Bom, mas precisa de mais atenção.', 5, 5),
(5.0, 'Adorei! Super recomendo.', 6, 6),
(4.0, 'Atendeu bem, mas com atraso.', 7, 7),
(3.5, 'Faltou mais comunicação.', 8, 8),
(4.7, 'Muito bom, recomendo!', 9, 9),
(5.0, 'Excelente serviço!', 10, 10);

INSERT INTO favoritos (id_usuarios, id_profissional) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(9, 9),
(10, 10);

INSERT INTO mensagens_chat (mensagem, id_usuarios, id_profissional) VALUES
('Olá, gostaria de saber mais sobre seu serviço.', 1, 1),
('Quando você pode iniciar o projeto?', 2, 2),
('Qual o custo aproximado?', 3, 3),
('Preciso de uma reunião.', 4, 4),
('Tem disponibilidade na próxima semana?', 5, 5),
('Gostaria de um orçamento detalhado.', 6, 6),
('Você trabalha com projetos residenciais?', 7, 7),
('Pode enviar referências?', 8, 8),
('Aceita cartão de crédito?', 9, 9),
('Obrigado pelo atendimento!', 10, 10);

INSERT INTO enderecos (rua, numero, complemento, bairro, cidade, estado, cep, id_usuarios, id_profissional) VALUES
('Rua das Flores', '123', 'Apto 101', 'Centro', 'São Paulo', 'SP', '01001-000', 1, NULL),
('Av. Paulista', '1000', NULL, 'Bela Vista', 'São Paulo', 'SP', '01310-000', 2, NULL),
('Rua dos Pinheiros', '456', 'Casa', 'Pinheiros', 'São Paulo', 'SP', '05422-000', 3, NULL),
('Rua XV de Novembro', '789', NULL, 'Centro', 'Curitiba', 'PR', '80020-310', 4, NULL),
('Av. Brasil', '135', 'Sala 3', 'Copacabana', 'Rio de Janeiro', 'RJ', '22050-040', 5, NULL),
('Rua Bahia', '246', NULL, 'Savassi', 'Belo Horizonte', 'MG', '30140-110', 6, NULL),
('Rua Marechal Deodoro', '357', 'Loja 2', 'Centro', 'Porto Alegre', 'RS', '90020-080', 7, NULL),
('Av. Ipiranga', '468', NULL, 'Centro', 'Porto Alegre', 'RS', '90020-090', 8, NULL),
('Rua das Acácias', '579', 'Apto 301', 'Jardins', 'São Paulo', 'SP', '01420-000', 9, NULL),
('Rua Amazonas', '680', NULL, 'Centro', 'Fortaleza', 'CE', '60010-000', 10, NULL);

INSERT INTO categorias_servicos (nome_categoria) VALUES
('Construção'),
('Reformas'),
('Consultoria'),
('Projeto'),
('Manutenção'),
('Topografia'),
('Geotecnia'),
('Hidráulica'),
('Saneamento'),
('Transporte');

INSERT INTO servicos (nome_servico, descricao, preco_base, id_categoria) VALUES
('Construção de Fundacao', 'Construção de fundações residenciais e comerciais.', 1500, 1),
('Reforma Residencial', 'Reformas completas de imóveis residenciais.', 1200, 2),
('Consultoria Técnica', 'Consultoria especializada em engenharia.', 800, 3),
('Projeto Arquitetônico', 'Desenvolvimento de projetos arquitetônicos.', 2000, 4),
('Manutenção Predial', 'Serviços de manutenção predial.', 600, 5),
('Levantamento Topográfico', 'Serviço de levantamento de terreno.', 900, 6),
('Análise de Solo', 'Análise e estudos geotécnicos do solo.', 1100, 7),
('Projeto Hidráulico', 'Desenvolvimento de projeto hidráulico.', 1300, 8),
('Sistema de Esgoto', 'Implantação de sistemas de esgoto.', 1400, 9),
('Planejamento Urbano', 'Consultoria para planejamento urbano.', 1600, 10);

INSERT INTO solicitar_serv (data_agendada, stats, observacoes, id_usuarios, id_profissional, id_servico) VALUES
('2025-06-10 09:00:00', 'ACEITA', 'Agendar para manhã.', 1, 1, 1),
('2025-06-11 14:00:00', 'RECUSADA', 'Cliente pediu para remarcar.', 2, 2, 4),
('2025-06-12 10:00:00', 'ACEITA', 'Urgente.', 3, 3, 6),
('2025-06-13 13:00:00', 'ACEITA', 'Verificar detalhes.', 4, 4, 7),
('2025-06-14 15:00:00', 'RECUSADA', 'Não será realizado.', 5, 5, 9),
('2025-06-15 08:00:00', 'ACEITA', 'Necessita aprovação.', 6, 6, 2),
('2025-06-16 16:00:00', 'ACEITA', 'Cliente quer desconto.', 7, 7, 3),
('2025-06-17 11:00:00', 'ACEITA', 'Confirmar orçamento.', 8, 8, 5),
('2025-06-18 09:00:00', 'RECUSADA', 'Problema com agenda.', 9, 9, 8),
('2025-06-19 14:00:00', 'ACEITA', 'Trabalho padrão.', 10, 10, 10);

INSERT INTO pagamentos (valor, metodo_pagamento, status_pagamento, id_solicitacao) VALUES
(1500, 'Cartão de Crédito', 'PA', 1),
(2000, 'Boleto', 'NP', 2),
(900, 'PIX', 'PA', 3),
(1100, 'Cartão de Crédito', 'PA', 4),
(1400, 'PIX', 'NP', 5),
(1200, 'Boleto', 'PA', 6),
(800, 'PIX', 'PA', 7),
(600, 'Cartão de Crédito', 'PA', 8),
(1300, 'Boleto', 'NP', 9),
(1600, 'PIX', 'PA', 10);

INSERT INTO historico_pag (id_profissional, id_pagamento) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(9, 9),
(10, 10);
